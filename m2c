#!/bin/bash

declare -r e2c_version="0.2.18"
declare -r e2c_os="$(uname -s | awk '{print tolower($0)}')"
declare -r e2c_global_dir="$(echo ~/.e2c)"
declare e2c_loading_pid=

e2c_logo() {
    local logo='
                  #######################################
                  #######################################
                  #######################################
                  #######################################
                  #######################################
                  #######################################
                  #########         #####         #######
                  #######    ####(  ###    ####    ######
                  #######    #########    #####    ######
                  ########       #####   **      .#######
                  ///////////       //        ///////////
                  ///////////////    /    ///////////////
                  ///////  .////    ///    .////  ///////
                  ///////          /////          *//////
                  ///////////////////////////////////////
                  ///////////////////////////////////////
                  ///////////////////////////////////////
                  ///////////////////////////////////////
                  ///////////////////////////////////////
    '

    echo -e "\033[1;33m$logo
                                Emma2click
                              Docker Magento
                          environment and toolset
                                  v$e2c_version
\033[0m"
}

e2c_loading() {
    tput civis
    e2c_start_spinner &
    e2c_loading_pid=$!
    sleep 0.1
}

e2c_start_spinner() {
    local sp=('⠋' '⠙' '⠹' '⠸' '⠼' '⠴' '⠦' '⠧' '⠇' '⠏')
    #local sp=('/' '—' '\' '|')
    #local sp=('◐' '◓' '◑' '◒')
    #local sp=('◢' '◣' '◤' '◥')

    printf "\033[1;33m"

    while [[ "$(ps a | awk '{print $1}' | grep $$)" ]]; do
        for i in "${sp[@]}"; do
            echo -en "\b$i"
            sleep 0.1
        done
    done
}

e2c_stop_spinner() {
    if [[ -n ${e2c_loading_pid} ]]; then
        kill ${e2c_loading_pid}
        wait ${e2c_loading_pid} >/dev/null 2>&1
        e2c_loading_pid=
    fi

    printf "\b\033[0m"
}

e2c_trim() {
    local var="$*"
    var="${var#"${var%%[![:space:]]*}"}"
    var="${var%"${var##*[![:space:]]}"}"
    echo -n "$var"
}

e2c_msg() {
    echo -en "\033[0;32m$@\033[0m"
}

e2c_info() {
    echo -en "\033[0;33m$@\033[0m"
}

e2c_info_bold() {
    echo -en "\033[1;33m$@\033[0m"
}

e2c_error() {
    echo -en "\033[0;31m$@\033[0m"
}

e2c_error_bold() {
    echo -en "\033[1;31m$@\033[0m"
}

e2c_result() {
    local res=$1 \
        noexit=$2 \
        error

    e2c_stop_spinner >/dev/null 2>&1
    tput cnorm

    if [[ $1 -eq 0 ]]; then
        e2c_info_bold "\b✔\n"
    else
        e2c_error_bold "\b✘\n"

        if [[ -f "$e2c_log" ]]; then
            error="$(echo $(cat "$e2c_log"))"
            [[ -n ${error} ]] && e2c_error "$error\n"
        fi

        [[ -z ${noexit} ]] && exit 1
    fi
}

e2c_ask_bool() {
    local message=$(e2c_msg "$1") \
    only_y=$2 \
    opts \
    res

    tput cnorm
    stty echo

    if [[ -z ${only_y} ]]; then
        opts="[Y/n]"
    else
        opts="[Y]"
    fi

    while :; do
        read -n 1 -srp "$(e2c_msg "$message $(e2c_info_bold "$opts")") " res
        e2c_erase_current_line
        if [[ "$res" == "Y" || "$res" == "y" ]]; then
            e2c_msg "$message $(e2c_info_bold "[$res]")\n"
            res=1
            break
        elif [[ -z ${only_y} ]] && [[ "$res" == "N" || "$res" == "n" ]]; then
            e2c_msg "$message $(e2c_info_bold "[$res]")\n"
            res=
            break
        fi
    done

    e2c_res=${res}

    stty -echo
    tput civis
}

e2c_ask_text() {
    local message=$1 \
        default=$2 \
        error=$3 \
        error_info=$4 \
        validate=$5 \
        validate_value=() \
        res valid error_count res_count valid=1

    shift
    shift
    shift
    shift
    shift

    validate_value=("$@")

    tput cnorm
    stty echo

    temp_term=${TERM}
    TERM=vt100

    while [[ -z ${res} || -z ${valid} ]]; do
        valid=
        error_count=0

        exec 5>&1

        message=$(e2c_msg "$message")

        if [[ -n ${default} ]]; then
            echo -e "$message $(e2c_info_bold "[$default]")"
        else
            echo -e "$message"
        fi

        if [[ -n ${res} && -z ${valid} ]]; then
            error_count="$(echo -en "$(
                e2c_error "$(printf "$error" "$res")\n"
                [[ -n ${error_info} ]] && e2c_error "$error_info"
            )" | tee >(cat - >&5))"
            error_count="$(echo -en "$error_count" | awk 'END { print NR }')"
        fi

        res="$(read -er 2>&1 | tee >(cat - >&5) | tr -d '\r')"
        res_count=$(echo "$res" | awk 'END { print NR }')

        [[ ${error_count} -eq 0 ]] && ((res_count++))

        while IFS= read line; do
            res="$line"
        done < <(printf '%s\n' "$res")

        e2c_erase_prev_lines $(((res_count + error_count)))

        res=$(e2c_trim "$res" | tr -dc '[:print:]')

        if [[ -z ${res} ]]; then
            res="$default"
        fi

        if ${validate} "$res" "${validate_value[@]}"; then
            valid=1
            e2c_res="$res"
        fi
    done

    TERM=${temp_term}

    exec 5>&-

    echo -e "$message $(e2c_info_bold "[$res]")"

    stty -echo
    tput civis
}

e2c_erase_current_line() {
    echo -ne "\033[999D\033[K\033[999D"
}

e2c_erase_prev_lines() {
    local count=${1:-1}

    while ((count > 0)); do
        tput cuu 1 && tput el
        ((count--))
    done
}

e2c_in_array() {
    local entry match="$1"
    shift
    for entry; do
        [[ "$entry" == "$match" ]] && return 0
    done
    return 1
}

e2c_requirements() {
    local test pass=1

    e2c_info_bold "\n[Checking requirements]\n\n"

    e2c_msg "OS compatibility check.................................................  "
    e2c_loading

    case ${e2c_os} in
    darwin | linux)
        e2c_result 0
        ;;
    *)
        echo "Currently we are not supporting $e2c_os based OS yet." >"$e2c_log"
        e2c_result 1 1
        pass=0
        ;;
    esac

    e2c_msg "Docker installation check..............................................  "
    e2c_loading
    hash docker 2>/dev/null
    test=$?

    [[ "$test" == "1" ]] && echo "Docker command line interface was not found." >"$e2c_log"

    e2c_result ${test} 1

    [[ ${test} -eq 0 ]] || pass=0

    e2c_msg "Docker-compose installation check......................................  "
    e2c_loading
    hash docker-compose 2>/dev/null
    test=$?

    [[ "$test" == "1" ]] && echo "Docker-compose command line interface was not found." >"$e2c_log"

    e2c_result ${test} 1

    [[ ${test} -eq 0 ]] || pass=0

    test=0
    e2c_msg "Ports 80 and 443 availability check....................................  "
    e2c_loading

    if [[ -z "$(docker ps \
        --filter "label=com.docker.compose.project=e2c" \
        --filter "label=com.docker.compose.service=traefik" \
        -q)" ]]; then
        if lsof -PiTCP:80 -sTCP:LISTEN -t >/dev/null 2>&1; then
            echo "Port 80 is already used by some other service." >"$e2c_log"
            test=1
        fi

        if lsof -PiTCP:443 -sTCP:LISTEN -t >/dev/null 2>&1; then
            echo "Port 443 is already used by some other service." >"$e2c_log"
            test=1
        fi
    fi
    e2c_result ${test} 1

    [[ ${test} -eq 0 ]] || pass=0

    if [[ ${pass} -eq 0 ]]; then
        exit 1
    fi
}

e2c_install() {
    local archive test

    e2c_info_bold "\n[Installing commands]\n\n"

    e2c_msg "Locating archive.......................................................  "
    e2c_loading
    archive=$(awk '/^__ARCHIVED__/ {print NR + 1; exit 0; }' "${0}")
    test=$?
    e2c_result ${test}

    e2c_msg "Extracting data........................................................  "
    e2c_loading 2
    tail -n+${archive} "${0}" | tar -xzp -C ~ && >"$e2c_log" 2>&1
    test=$?
    if [[ "$test" == "0" ]]; then
        ln -sf "$e2c_global_dir"/bin/m2c /usr/local/bin/e2c
        if [[ ! -f "$e2c_global_dir"/ssl/config/v3_ext.conf ]]; then
            mv "$e2c_global_dir"/ssl/config/v3_ext.blank.conf "$e2c_global_dir"/ssl/config/v3_ext.conf
        else
            rm -f "$e2c_global_dir"/ssl/config/v3_ext.blank.conf
        fi
    fi
    e2c_result ${test}

    case ${e2c_os} in
    darwin)
        if [[ ! -f "$e2c_global_dir"/mutagen/mutagen || "$(echo "$("$e2c_global_dir"/mutagen/mutagen version)")" != "0.10.0" ]]; then
            e2c_info_bold "\n[Installing Mutagen for docker sync performance]\n\n"
            mkdir -p "$e2c_global_dir"/mutagen >"$e2c_log" 2>&1
            curl -L \
                "https://github.com/mutagen-io/mutagen/releases/download/v0.10.0/mutagen_darwin_amd64_v0.10.0.tar.gz" |
                tar xzf - -o -C "$e2c_global_dir"/mutagen/
            chmod 0755 "$e2c_global_dir"/mutagen/mutagen
        fi
        ;;
    esac

    if [[ ! -f "$e2c_global_dir"/ssl/certs/rootCA.crt ]] || [[ ! -f "$e2c_global_dir"/ssl/private/rootCA.key ]]; then
        e2c_info_bold "\n[Installing CA certificate]\n\n"

        if [[ "$e2c_os" == "darwin" ]]; then
            pass="e2c"
        else
            pass="e2c0"
        fi

        e2c_msg "Generating private key for CA certificate..............................  "
        e2c_loading
        mkdir -p "$e2c_global_dir"/ssl/{certs,crl,new,private,serial} >"$e2c_log" 2>&1 &&
            openssl genrsa -aes256 -passout pass:${pass} -out "$e2c_global_dir"/ssl/private/rootCA.key 4096 >"$e2c_log" 2>&1
        test=$?
        e2c_result ${test}

        e2c_msg "Signing CA certificate.................................................  "
        e2c_loading
        openssl req -new -x509 -nodes -sha256 -days 3650 \
            -passin pass:${pass} -subj "/O=Emma2click/OU=IT/CN=e2c.local" \
            -config "$e2c_global_dir"/ssl/config/rootca.conf \
            -key "$e2c_global_dir"/ssl/private/rootCA.key \
            -out "$e2c_global_dir"/ssl/certs/rootCA.crt >"$e2c_log" 2>&1
        test=$?
        e2c_result ${test}

        e2c_msg "Password is required to trust CA certificate...........................  "
        e2c_loading
        e2c_result 0
        tput cnorm
        while ! sudo -p "$(printf "\033[0mPassword:")$(printf "\033[1;31m%s" " ")" true; do
            exit 1
        done
        tput civis
        e2c_erase_prev_lines 1

        e2c_msg "Trusting root CA certificate ..........................................  "
        e2c_loading
        case "$e2c_os" in
        darwin)
            sudo security delete-certificate -c 'e2c.local' >/dev/null 2>&1
            sudo security add-trusted-cert -d -r trustRoot \
                -k /Library/Keychains/System.keychain "$e2c_global_dir"/ssl/certs/rootCA.crt >"$e2c_log" 2>&1
            test=$?
            ;;
        linux)
            if [[ -d /usr/local/share/ca-certificates ]] && [[ ! -f /usr/local/share/ca-certificates/e2c-root-ca.crt ]]; then
                yes | sudo cp -rf "$e2c_global_dir"/ssl/certs/rootCA.crt \
                    /usr/local/share/ca-certificates/e2c-root-ca.crt >"$e2c_log" 2>&1 &&
                    sudo update-ca-certificates
                test=$?
            elif [[ -d /etc/pki/ca-trust/source/anchors ]] && [[ ! -f /etc/pki/ca-trust/source/anchors/e2c-root-ca.crt ]]; then
                yes | sudo cp -rf "$e2c_global_dir"/ssl/certs/rootCA.crt \
                    /etc/pki/ca-trust/source/anchors/e2c-root-ca.crt >"$e2c_log" 2>&1 &&
                    sudo update-ca-trust && sudo update-ca-trust enable
                test=$?
            else
                echo "Currently we are not supporting $e2c_os based OS yet." >"$e2c_log"
                test=1
            fi
            ;;
        esac
        e2c_result ${test}
    fi
}

e2c_on_exit() {
    e2c_stop_spinner
    stty echo
    tput cnorm
    echo

    if [[ "$(basename "$(test -L "$0" && readlink "$0" || echo "$0")")" != "e2c" ]]; then
        rm -- "$0"
    fi
}

trap e2c_on_exit EXIT

e2c_log="$e2c_global_dir"/log
touch "$e2c_log"

if [[ "$0" != "/usr/local/bin/e2c" ]]; then
    e2c_logo

    if [[ ! -f "$e2c_global_dir"/build ]]; then
        message="Install Emma2click Docker Magento environment and toolset to your system?"
    else
        e2c_is_update=1
        e2c_res="$(e2c --version 2>/dev/null | tr -dc '[:print:]' | sed 's/\[0m\[?12l\[?25h//')"

        if [[ "$e2c_res" == "$e2c_version" ]]; then
            message="Hooray! You have the latest version of Emma2click toolset. Reinstall?"
        else
            message="Emma2click toolset v$e2c_res is found on your system. Update it to v$e2c_version?"
        fi
    fi

    e2c_ask_bool "$(echo -n "$message")"

    if [[ -z ${e2c_res} ]]; then
        exit 0
    fi

    e2c_requirements
    rm -rf "$e2c_global_dir"/{bin,completions,dnsmasq,docker,functions,local,traefik,www,build} >/dev/null 2>&1
    e2c_install
    . "$e2c_global_dir"/functions/e2c
    e2c_sign "e2c.test"
    e2c_global up

    e2c_info_bold "\n[Installation finished]\n\n"
    e2c_msg "Emma2click toolset is successfully installed! \n\nRun \`e2c --help\` command for usage information. \nVisit local https://e2c.test to check useful links to included services.\n\n"

    if [[ -z ${e2c_is_update} ]]; then
        e2c_ask_bool "Initialize new project in the current directory?"

        if [[ -n ${e2c_res} ]]; then
            e2c_init
        fi
    fi
else
    . "$e2c_global_dir"/functions/e2c
    declare -r e2c_project_dir="$(e2c_get_project_dir)"
    e2c_log="$e2c_project_dir"/.e2c/log
    e2c_load_project_env

    case "$1" in
    global)
        shift
        e2c_log="$e2c_global_dir"/log
        e2c_global $@
        ;;
    init)
        shift
        e2c_init $@
        ;;
    sign)
        shift
        e2c_sign $@
        ;;
    --version)
        echo -n "$e2c_version"
        ;;
    --help)
        e2c_help
        ;;
    *)
        case "$1" in
        up)
            e2c_local_project_check_dir
            e2c_local $@
            ;;
        add | down | logs | info | remove | restart | start | status | stop | update)
            e2c_local_project_check
            e2c_local $@
            ;;
        bash | cli | composer | db | grunt | magento | m | magerun | mr | mutagen | node | npm | pull | push | redis | share | sync | varnish | urn)
            e2c_local_active_project_check

            e2c_res=$1
            shift

            if [[ "$e2c_res" == "m" ]]; then
                e2c_res="magento"
            elif [[ "$e2c_res" == "mr" ]]; then
                e2c_res="magerun"
            fi

            [[ $(type -t e2c_${e2c_res}) == "function" ]] && e2c_${e2c_res} $@
            ;;
        *)
            if [[ "$1" != "" ]]; then
                e2c_error "Unknown argument \`$@\`. Run \`e2c --help\` for usage information.\n"
                exit 1
            else
                e2c_help
            fi
            ;;
        esac
        ;;
    esac
fi
 ᷝ] rG(8[_,A̺@E	A	Ӽ5@@ͪRf@y:{v=f؇]udDfd] Qypw֠j4.^~k^鶛lZ/IŀQ8/IɎfPOѧۿm6.ja4xǟoNsyqQo^s?ߵm\gggwqQ	5+o?4nvݻ`4te =zάou[(;o4 0Na2_~K޸k۸ 
gUukr[oލr}vy4e(\MٙLK#ސtP$k(f^x΢ď+_`g~1҄%~|	;1KOҰ LR>;GY>|C Sh<xLVEV(g7%
7]/{lMCrw3_tf$cPfg'DE/d/7	r.d~u37D5pH4;OhC[ uJVoyn_i4`?Lod]kyQ(ٛIN&w?Kb*|)AU77UxcI{l|NԘwG(&n:Jxq:;_>Ae 2|ԡ븃8BI8J
߫WnnkdFnݾq}qvR	o0Wxz譗e's|V}h4i7ǯpOq0-vn4G!KNh(/0M{1=Y9
*?߉"vapl_vVU;nZ˧G^⁑n@N{K;M[IUV K %@LL Lޱwx_*m¬M	d@	d@
 ov$lVcDR` K69֪Z{9b-e]v
Lm${}o>V똗
F9\κGZk=CKsXϫqU3u\Z뒓9N}Eg IΠ*&)S)b=dc;Rt*FSPrNk`Q.(7\5!J
J\O=9d_d(0a^ǝW/^XĲZHjokv_"q$:t+Ց>H.O確%+JCir%}1Y0rA}	`4r"xǏOϢ>A&9rw_nqZPbE Ķ¼Lo`̩7
c4+AD&:/]Ѩkn_i8q׼վ}־ƹJmfeOqۤ"}iJW:8sՆSƜ7yHNxa\ZI|}ʓ [U&J|h(RH!"l!msYi<:xɲi 
"#=xW3h ځ?-|J{4.[+0tk%G`Mc#T3s!6IT; }!/3~`獢:GAt s1GުS۽<X"pWpF]NF/m>?xllQcbp*V\ތ 7لo}DT9R#H,kLT].xI^|'ɛƻK>qnHr"}L'<Nf|V "TU@`VW>ST&M&@|I9TmZ5}͚5%~dPtf"E~_T$cx*$fu	s2|lZgI0sr|%FD&]Λ	*X*[>/^^>aBc~o2 ϡs}(<_d/2?{}iv?Ȟ?{;w3_(筽?ˌPܜ[-?SYͶ~ճ? ' /`(uY찛UIgJ>9eSSڦ2d3e!Fi7N/ mr22sbmTC_U$:%Jx^|Ӡc !@<FyC|]1q)ݷsOӽ Q.ψ*%3?[͈z[EV#	n9G@Lgxx**MCE/+CDz&>8,d3r0FmaI<Ss|[@g</HeI`MgYxK|hV-A TWԘ٫2grk^=Fal~yjSLKM]>Ҳw҈6Y.#t _ʩa4f@ك6 2ˊ_b 7 98Nz>r=vk0YD_BucbNcR	.ƪ
SAOC9{ӭ?ShW?[OMCgIΓ;{oػͿ~_REHf@syKz1H^d|S$xD2,I1iVNkW3Wzz[f+P6W_ba	-($?Ҷ.K%$Wh^(mSp 
׳7=ȓ}uΎPƌOFؾZBR.\Y:qM>V|~Ͼܯ{c;f= aB"j(:v{Ҟiy4TN`	.lBOF@i0x_7/ricd]ex19]d5߇YȼxJVo^.ۛbڇͽ`҇z-Ib=aR9LEôǻMaiR缕q&\Fthļ h_#TQ7;W띞i[%4OOwHM|E5nEmI%*$ŞSK.APz@L$]8PbG9*U7!2L ܓw	?(*P!o!\7k:/v)u:^$Ns46Ү<L`<,*5Eky^l˘jsvGA
sF'(L)B&mA.6'~H7
Jm2a{tMhR\UTX/z
^5y)*__
_^d]MAk+KiY.Ɓ2
Y`yeZER9kcB'1ҊдW·t-$![fI-KvzQ+a01 -5MeB L%V1DMq |{Po%e?_WriBX4e1^R+qӔ]6twT.ɪInꨴJj&U&]<YT*fDAhDYBfCCk cGgA/
C͉`1)l%MpxT(cM=]e6h,6+>=#W5ߕ-l^ 7cp6Zy]TvZ+uh2]72-,!`Ee"hCSŕ8zl=۴8>E	Szyi.`NqGăi]Ɓ	GyYhe8A!0ʃm2(CȒ$l5A}|y9h_Jߧ%/$qŰsҡz8i.E]4^ZnSViʶ_
de䟧U{5_+՚^^p΁ַ-ucɟoaMՑ=ZasP]ꅪcUld_7yVsjIΛDane4&-vLGH,{#vT1ܠD(3 )[L^uD%rB>aiߢ-tE,7$*([!J1[
n;P;,PVr7*h͠YHAYwu," ,=z!۰ $Ddd.U{њ)Bb<T6{M,/ĉh]g0??eC;'yʤN읹Az2=´	I)
z҉Teg!Lw(#ŃtGaDOC,2g-I9\up2BIܺ)
sscsRMS4뤑{_cXA"1ɂ,УBWšIr;o0Lcǭi%߳}eB7@ih:C?	OK	i<7Pna,C=,I/-Cf5uUavugf3lspiĪͨ,7gGͲlbА1XzimU[/>^HSTg-0hM<5,ÜU	rRghNRʝ
ٵ7*ojySɸ5#mgI6#4T+cX^m8ZBUHw@J̦e9>**>P&		3RG9<HF>mUARqd)zok(L
#G
|?ΐ	d;bpzPnKl*[Q<B$S^qQфiIJ\TmGZ6qD*YPPJ$&i%fK[2Lå39DjvJ	WO"fg	<*,g}
|Ƒp2U6+_-NYT
q8k"fxy2Ļ56wYC߳{&-M#|l[?FI0 ƣE2+g~ݿ	HgRۼ!sʏb|[?buG߮A~{\\[ϥEgY9!{ۗCghiKs^DSfle0Pìcط!o(Q ىw^a%gRxKxVA[ >=
`=Ct*S3p`S mꙦId5BnfA2u'Ar N
˩E.м[y~,HOiʎ#rV
Z)Gz~Ppqn`ލa{IW]G{8e!u1rA3(|ė&c,C>荵4VKܑRx7zS<@]x
Q!5:29(-@
\#|e}pV%EVYb%|ሷ,8Foi'7kRDMIbjm?zZOx#7Ȧ	ė_NӰ!/BW veq~C cSvT;L%Ɉi`:iLla%+N6(kk$a?H%YBxoBj(1|caOSPy(d)Yda)Pҏ iL4%081=v7$Ijv7-&nhnlhڟFie'tvhM ?=??-?y@7y):EpX"ź.dkᡁ_@O4OڣA="BE4z'"%]=+Y2E
Hơʛi˛i;,E"ːEd
AoHD!oHD!oؑo,E"ːEd
Eq;让bp@muuSwuVwR*I	
-TZ
@@S%i%i${JwMuW(&^썱G:j $_YH	MGFLۄ&̝sŒ(QLA64G}2QOi_
)P~zZqdѤ_U+K=b^j	NTg	9g<1m=:u(	k\׭G2 =z!qJPR`/<+*HuK@ab5I@@ޚ^f@?
^Rl\ț.@6\&zrVHkfUDr!O.1ST/[|OWX$x#'fƞ6pS$ҽpt
]hPNT@{y,+ܗŬ$(j%fw,̅ݕe x:byjT[e߭π{_=!jE͵W*;wlKge[b)طʺڶ5ט\䞯ĸRR-:!b(֕.-MٕCs&ӕ1Z
#
]oX3$.
o8V:X
-a	5%X#u0.rWb܂cP%'PM0w`
:,[([9
-a?k/Y\밇uqXda1zzG֠Ÿ(S*lƠ,NM芫Z1wbZ4_XJqqZo=ݵXDcv݀R,[][_{yGfqm%OV/b~v.?뛿j9ƶkoGhw}v^?*1K\(@itvx27DyA;(%gK{<az]!TnX0-\h0;~KhVʳr~aN}t[m[XeM&іDM^,x+k((g`&`{4Eg~Ҩ]hCz6pn&2Vf~Xp40A4I--[aEVEpRb+Lp3i%ZLFӡ,UkkeXʄm9+\.챧@me2&?۫lLTܜb/Q}#5PXCt<As-$r	2<נ>#5^ޙ95bf8CQ-V	VM;XG~YMcʳ~9YUyCR)B^9¤5kkt<ma|6MԭKbdhmqP6ĬJ[m[Qf<F+fvYoPJ'Uxa+@Ϗ	ן/jI|k(xSr*M$.νq9wW6=6oyPVNM}[l#-h{:ƢQS.7,B/n-(UK
/\P޲PW6ne?Q@-'	E˘@Y|
>EU)<`qAUFODAX`$$ZB*pif.#)wh'/qt@|'?Ki3WYf>d7?P$Ow&=<%B}6mUk 4DՋppKIษg5/2[(HW~}?tjïGA@J%B螿r~b>|얾+힎q9zǰ-jE*3Nԋ49aA>)xAT-TIJŻ)Tuk@Þ>0T9{tIBgZ(HݔNm:3>՟֫w.rB;{9&^E?{lωz?!Q'i|dwo埑Ѭqn^f]r OgeˑW̶ʳPgGe,¡sHVz#/<Wj9zZ&kɷ_<ɞ!Ql_^</)hY>̮8/)^d&Ԅ`iSQTV,YY,c;Vp{A%XW%v<ã5A@B=	$@lXQ FKz躮{uPGΗ	rl犏XH^l0\' YwVU3a(?\  GE+^Q4& hk( )hd|Y|C27E[[vlyk׏`,b_wRll~]N.˧QQ5u(H,i֠Xô&':-Dge i27C)K"r,ʷ;O2hN
2m~/Ci=CZ%^hbEfk'ⵓVk}/{DI&KG'9bPmsDa/8+Tts0L1B?kc^5bR,IP	4F˩<	od_UUـ1ToHϝt)8l{&Z y47kmc.O|kzNH$Ps_Wky_چ&@K]l5tY	K a-5y4ooŘ8ҒnNR;aj'(ɆilN9V`U佟*6'MM6 [䜚Lrm6-Zz}͚5%"O6XF{
Rڋ4MTo<]AgzX.IGu T9[%#䚻e<b;bA<S&B*Qcet$ 5a2g<`-ߴZͺ/&ЛoVA}L=JD+5^]x]ŠơsfCuRU}PT0i3&'n2Y7)ܺ^f%/mٶ
[A	:WkUeleYӹ/'&I[ŶubǜbQֈ͢h2Uci StT!I@vysMz+lZ	VMu^wkogldOR/'X4%ek]q,;pCIz~ `Sp1NWqsU:bYL(ⵀ;0gp#SN!>Ŋ:PF܅PRK§a&F8}:|R፽yg"+xx~3t0	ʂzW>Nc!5qV.N	G0S8H[35@\W	7!^F`h_XA+قi(s͠Q	`Zq2O,Oyt)[=K!N>Gi̵OQsJ.ir6%=(	zT<BDzz+)fJkGf&q>h8bnQ4`d9i<i!>5U\	ErGAJpŹRj=:;Ye">x2fökuԭeH%,C(؄=h"FURfcB>mWM(o!Jlt\̳'Wkyx\9,8gX.nWlj2rPIC\Qz,t8`1_e`A -u*#7*.Wlf$/ҏWZװ#@#$BFD	p{	e 1->adcjqεљ&? uG=vZ.<-uzXWxá X$3@7\~<0
V=d$,+Üǰ[w88)%"2Hg&Gqcd*x?M(A*b`*S#TU$Ze&Rj讬i_էZVI,["3c5\ФB\`r@VeV j o5օh.2_H#O^j+ǂ]#5gl3Bb?abЯN
=!FV4y:5e>ZO@fCN䖵։;pIkXmxWn@aԃQ}@P"Y4F󜆷S"pͺht:,IEzHG7,fI"oX.ę[ZfRk	NY5,"L'VZ1N"r)SC*Mo_I%I"9%gl8{R6_~gB'1َ
;谦Re_<8672y67o6z*N^E3^3ݼczeX>,r߆W`4-|\MܳPVWm+㫲>9e
Cna80IET.k2_a}l=X-Ϭ8Hn.dӞ"Ն9感`@ݾlޔHy=zrZ6vxs6+M5eܺ-zuܸziM	z.doDdEC3#5	P@P?!S<l+vJWïLqLu8Gh*0cPZmJ8PQVAi>Q?M?Iݰ|GUPA.RZk|s_-@g8W~F}]lMr	vF䪞ro'.D!u+k&Inz}0JFޡ?\*d{Xo/ W"$_/^-'pjNs+(k,Gt3}_ʝj*qdwθ9<3G;geOɌjoVvuZUKoN0V/_@hŪ5=G˫S#,Bo2Yd)C~>dxc!]^M%]}2\eoԳ"7_sj\ԻxVktipyilD}5 $VU{|[[oUuaxތޘNQ;[MJ&fޛWs2b~=ePaƲэ n}*([Y5A\XsVK^!zOU~H
˗ܧ_h@vQmاSmg$YAEc5ܘ<Z<KsKmqlB{uaߖ&ĳ<]8ܲadE7Y
l~m/>+(ȵdǵfeT?@)!$-Dɥ"	{Sop» ]Ӓnl0(#ZTچ-qf .¡7Ù7ɕq!tWY$tȯT?Rlf*FgQSwOb=tĜeñڝ5+<#syO& xie[ކ'^xlGҎ:~(#lxD0<W;חJj|	sU{E!&P'ȇ	<{>ĿY(Ă?ڲ4;Bĕ0k۔IXCӪ{}A	jW`}h-rR~e[qI0_r!>~%>>KJJ&Rb*6= 0̲ⳅOAr3HbZEn=?>F3dldkq$)4&jj߰U[9/F/@IHJ9}S˛_7ép6-v .Zڥ]{-oԼʚ8L`XSYM[7Ǧ
#Q$rkeoN[1M| LTy`:Igloch2<suRI&&d0{="0P>s)p23A=߳hzrV\p`G,uyۗz*E2KKJq܋Ocf,o.tM"Oxg>K
i7N/9PN/
W!ms$|z,JT\E>ߜ缝ܵ7>{
񡸂wv__4bHP=JņtPhϲd:CŹUnIJhw,[[	?EeCK.̵ޘ9.aYF/I⡯E
|D	>ESoqyY_$ᅂo\@L'}.*?,!_AkVd_~Vic7;귢,nTtTiѫ* XY
 d\"*W\a|%V~Qv\%Fc*exyΗ7˛75mc]Y Xfm^Ͷzޛ70GEO
5hkM6ԩa/ɹ}`Y1@[4_02#D'9_
uhepzh14D~x|P9=$~υ{q@rOiS^c.;?ᦁjGĊJO|ffxF`*C,HܴA}W)+KKCEZwBj pf*wX0&빀NiUny7}s%r3oXRr8,%|#3"jon:\y:`4K׈U:pHtb9ѐMܺVqMpg_?FxDH0P~c$}d#EfINVRq2H/-Scce(-z¦ε^ƬzRCk}0y}/5
Zc_|%$ɋG^x!z#z?%RMV<Pj3Ej/:^5ԴovAB4Uhp^+{'Zh5qA]>QW9N"SXw+n$'b:SƑCJA" *$k lGGzˬj@i7Wry_}U#)ưobUC?3jHTp3s`m	b<&J*Y(js>bt"wlG$(NIEO4a*aY0/-3.;$iz2es䃑Y(lR.|"&94ּh!P9b~4𧠘]xӋĻ"og+`JK_[GJV4o	3#.˭1	Ca4mLX]vgl=,shcZjD3cCfADY_1wP>0M퟼F<?_^Wg
!SVּ,UE֚UpU^kQ=k-N_`IJJ^)G83Om]ŃeU4~s93By(O⪳j2{S!F$s<ފAh'nI)z_sU%.qqx9tՇE/2'xc-0 M)%}n|Dv	dhdc]#60Y FnQ.3 K\T^}r g-`|@g4N`z?sØ*/N<Cv>OQ}:7u1ǔz+EBG	yG@h68y>|0C%h}v$:J~'C<^/ 4+8ϓ:5bS)S{Õ3ca]ö^ƈFE܄ğO;S"THǭ$/=\Czk׉EM5`@`7(&qs7"#W[H0xd$6I7./<4I?'LȗMvM jmPSݯV幵珙<|ϣUhE~47eqV ,t +dD?
G[KrɍZNBz/xH~&qyk5gVV:
pkřW?e39Ź*
Ek>C@_#.j+F$|N,V)_98EO>}<wZ̫(Euxb\1UALw@+l,[k!:QKld :ks`mu{y'NX9PQN( 90@/Z}52 :ʷdWŕ
Rw%I=i-_eWid<S{݆b9$#z=5qf{^1D6moq`	hU0;HOqnSpGKl6.VhC=Tw؄Lz=H-hQ~&_jBX\QjZ{uK\]pٗ@:7@>PMFm߲XGx=}3"@/+`Ђ~vtQ,"o)  ú@Ln3*lmK[4hY?e'Ͳh3#mΨG4+4}I\ݙedUmkZlkgm^ˑNt{5Z\]EHfXD(↨:[նB%5-R0|</TbT^ 	.~<+<y]FuCUĲb)9AffkC.K70`/iWwpv[!Rs+}x)[baY{[ť2+kђfϝ'h:_cnVxW!َ4F	yD@'q[rc~z;Wnb=ʌ7B'x"vt'$];%['tgA(Z6d_jfCt~;|S:;v֩]r{ROu^*|8r|c纝	o1ֆqv?Y_ʐ CdMܡ F>y~,2>>&`'l3~aD#q4IG &$~k4wLxqYqP4&;)enίLy:m2e's|i ?eZqK&GF	_@ hN)9OJ]'ݔ4d1/\0&xhmF	Y/WDQ1>VA])KW5c>Mbӑ%,<Jvq\[
[%Q@QZ'&i3.ʄ%6Fth\4֟cTIB.:yɵh4ֻ]F6Z+.lw;nm7Ym7JP9!O/IɎfPKkpe\;]ƥ?e\]Uh,u:׀_oCo3C>|W|:BCBaєx6
tI҈0~AZ CVQ0"'AXHrMGNQr>;Svԇ^qe
^"x4Cb_iMΞyT$:>ku./?>.W7^	;Bw9)eVXLexУD")PKU~yf$M'eIK?v8*	.~ìgLeR{ߛ8
}mUdzZ,9?9&l)0he5ЧCI1O1:HPq.S(7EgЙĂ@>&zh4:~
I(p(|wY>8=|1>o6(LI'/w/+"l 6x3Hy}EHcE#k*H+Mf2"mݠ$:҃4@6AAx	2?0hě)c쵕@oiލqfdGCs`dw(7 MJoBh(t"\8&'&s.B^@)@מ.+iI{$TVU_&h:ɾ$o90׏7GW?ݎ25 	N}G '^@I7 ~"F;.
z!!
QlUμtp)u54<$JNUnrዹmy?Vs}N%6V6YvHɴ9T5|>ɗp3$x o43٫?59FudL9e60>o^wʊ*O<p=]pNow]?s6M.&&G^8$NyiKOa$P	DGEZ~\9̾!(|9#ƠnګI9LksFgi߈{590wovmAowۍ׬o4rrȺ<(#&vnqXL<'})FLA0"FB> >UNoyNzޝw+E,MyTd 뽧}?E1:DLG~#xrwLrk^=|f<}t F~|g;N_R?~OzJLW}FtK>)L^xULٟ^bU|^K%ᚯS}zZm4>*_ݖgowf͚io~623m뽭}O}g?ok9+/ͦ̕=m\S|jBs	fL1_DY<Nd³
6Qn:B_`Dgŗ9JQg[|)k.mu._+o
`o7[mOcy5G/-+<9P6j:{bqΓ?4Ir]sE.9_ǝm~,YYԗCu4r@mrIۖZxIKtK񼟨-}x`'?9s`H6nrm ϧH(h?tFm:8D{Ϩz7)xGPQp
rAY,`^^ћ̣qYDīHnx5G	 ;H}1Z3n޺n0bڈLGOmHIbaݚ[^xipw]+GA8_FGp9][
Փ]ՠrz̪5LDCP!ٗ;i|͕wx_1̳?kPw;,/~ɵk=\ѐkbiR"5_Y/nv{ETc1蓙rIF͗3a^]FSWGnNٺqjDoyZϵNK:x쁻IHso|(Կ&4=r6{f@4:$6Z:Mg.UdT栞r?nr1gw?Fɛ,cvoo:r=^0lGTxܯaQuc?dW_zlTŧ4HG,L:eD	ү*]U(AWςazy:p7o$ p~Z4AP\V{=>.QFaQ}<\E0?q4d$=0k# y`tQ%oSLH6Y7`~LǠ|Hc~D(d_e:0jƂ@dlՄɛ?Ǒy(Mqʜ}}|i~8s4D,FstTL/hJ3'_ކ[a_EGԛuYۍzz6&^eGk:FcDcҎѨez`) ~]g.d߃寗y^z]D72NPfk#o#n/{7[	tz<̂lZs@sd z&=貍Lo}Nnp""bK/4 BL>[:3A{j ǳ 4t 	 Uk~);VlF\:;ofIN,!cebMւO4Y2F#p?h{MRz!9mDjoE0$ 04nMB>^zGywbo2)Ti# \?Zl~
 !'p%4Qc`/'&:ckEѣ`"hN0څ H11 ?6hQl<?8W0AwboLeZy&/,nHh
!z_{!(p14vV 85GA;0}>OY/a(bXΛf&(*d$,m$ܒ|Pi<L+?aOo*Q/08eO}=WQRa*UƊTA}m_Ur16Uwhua4BJf~Y6m8tzysכfmmPь<m5VƟL$~L*}Rk6Xnt:' YRdޭvPP),gt76d8O§6=§t?:$vQvYmfn*P^G>5vlκVE}47V@@WtZmAiwfci=p{ <[:SSOA;T]|nlux' `+,0]︠h6#Ģc@notvmtN>p
q6:A͠8ʂ(TSЭ\(ev(7CmVz6 FگAO>whwjnop;|u;ڃNz]Z,=؂ k>=$MZ=_6]\ ?ؐOckZl?iF;Bov8=(no`[Nj_Ym>yq܁CbSцG,>t-jTm<yAn=(϶-XO4]4Fp-P+mX&vP7[dv֛jrݯ~aw?,{IS[;hGIaj@a\hj"BFTz0U_JZrhR~
ߟD%C cK	zu _a'5.zZhk(t-(0Xp=~d:{Z͌L?7Lc[|$vȈTDh*h\yAmWqX D{O<{6z hv;[G%'
(#0'DЭ*0
W#O+kStT<EGJvZ+=EZMKʣy89>Zw.:c3b]4俗男k#sB߯n9Ro,f甹9/r/ǯŶʹ*d,
t9IMtFu.&h2"BApB*E 8G)7z9H&A$z{:$Ow2鯭VMO\BU/?߷?a?5J7QBta#N0$7FI¼ȸҼ\W1hefF?b Āw.w;HHp%27CG7IIED<PDך=)&T1P.J_AڇyM`Z?_/|s&mo{e2K*!>6$RxhC~nWcgdid9}|M{>2ȚQV,ϼl1(^WZ0Rh"'Q+p1F/= "!2_, HYy	S`\PrW^ޫN1G6%zܜ*;ܳN=-i'	B}@4٬DE<kh&ڷo|L00*V]o!Bگ4*siJ
3`$]'1V)QQiLTkP*Ud	/x`h$bRe>Te2Z]4B3mYLa"<li+4$$ IqC)[NV[H<[DPE5t(z)@ZմoP]DS୸o}79	҅*+UktKt@W;{(wӴh4'lz/OT~#Z*1^61$
+1-ℊ*, u35D]kd)yxAʚjCTP2~ C_M^ c{n~+*Gݱ{֊lDA иDmqW1s:(#!J0TI.pښ5-+O|ZU!{([um*T5j<)F	pZo5>g M*}joeb^%ѕJ .e_bS(A
IXa)$V>*q')܄ W]p\*j9:<xL7TUJ޹QNpӼEgGQ\1NAGn'|#v0	dxqpl:+RRF5>V(U1Ӿ6Y/ CyCrh7' c}2̻8bX/Q >cUWzřhb1mIz(9dkp#d$9ٙp=RL'u_ᅲC@aȠ~V٣lb+ɲHD. ' GEIFi">xɉ5C9
]'N-G8oQ"5%q	,1'acdu|v%D#4gѩ#ʜƎ*VQ	R|6RW&Re\d
g!0	hвifީepiU#h)&;maWrtJvuv_Yr(2xr$xtws2dP9X+DcE8	KjLYlka n]Z+ְ>҅,ے#$ 3G] acS:	\Q$fJZy_wG͠o@[GݱqY
OU	]>
1P !+E.l{mumo(A5f8EL6,{BN{ǭ?W˽~ۏ/[gZ?mqq<`|Ñ`-|n;+v.<_;-F\m&gkӋ=L>=dpm|0?Q)c(
bhs&U3`]6FKُ7		"EI}꧜2oo<uG{+tB?
s"m`Vd)`Vγ^x~CPu<`(L 5OaR-ol4S!]s.8KX**9=Yiؗ GF4E=V9D{1.aG?GC>7,tFm|'s<?iu{PP!-Q[dmR ~pcf%Q`B#g0Tv6	p'h'6r3fv/ZL3/^w_շҨX>PˎpvAl3PU"ho>tƟf^|!KÈw51oVkoO%124TѤ"Өꇟr0kBWH.ZXB&&K2!d"7EDL|q!S_/VUwX-5(C8@\wb4{Hga?&2s1A/s oc5Ĭ~Vٮ* -#%^>0SVki]L'|`-K;j5z蟼7b:BzZIh,bW5@{n6H	o|젚r7IIVK+!Qx<bl1
7X52v{Q9Lu&^E*5jFz)C	*7aZ=?R"SJM'eQ"1op>"gdp<Pm_;0ΡD%YArsE YDY_Ͷnqb]MoAxfk[ݓz}V2Q2]mɌG({hN<\;#nFG:Y\ogLTAE -P@uwivk")o{r6ےu2TՂĲ
%ro#}\Ohi8+KWTUzv-E+jELp=	z΢,9
0v?cEbcC' Zq.7= !{3%'hgQ3)y#6w!ןXS4V/P"6z,j9Pr`0Pl4v(θ(>h¬A-O[u	&Ky}օccY%٪V.pD37ۘ/`TyW/f!flIfeNȚd|n	srF7tzxM'PQmAhOWJ+/JȄkn}~@F0z,MƂ?G-A(DC:'L;S5p:3T>TO"PapF}!c`㰬kH8ݜfV1_]4ʍ E!M
)^O|"Ŭ̫QYRVU5@M.Wi2u4T@X߇^|LgaDZϠG'd3p̭pBۦ5/XRac/C}#,+nF5[fZi  <(l1kfB$inEF-{·}`#<`V`K IbY<8%Mμs:U#kLo ڎMwQQD1Zbecqȓr5FcSTg&Z**i͏dܡ) OY6zgp!w]i{9MdǙYQ9ǌ*ΎeXr]HOQMoxE?;v=|<d*UAtܳy(7YK2iu,V`Y$kI0E'
hbf]'3 eÌ&ilwj;#
9ꤙ؟BǸB]۸/.n4/DyMM"da&ZFe<00RCx7a@fSZa/ LӃ4(*YTƞ]$̖[BIi&͈ʘn;]˺.uͽ UgJUhR+ϐ*
xTAw;>N?i27nHʄJE3&o25i,K)UEΟ0
dG
Z8LADr)[En\bHCxoV;qqU&sx7^x=9F%_/4~s{a+oh1
4|HlPDO]AhiN^X^G$8<yWt1ct2	͟=OS:88kzRa8ZE1EK3- }Th$HeuG?X4\k^9lhͤAVY/h$<>CmzcWcO9RN]wgc3Kw$'/3gLDń:/+ Dkt
cV:?p9lG .$7l=ߩ|M,(^=2D8H~{X}Hɉ/ G!m93ZI>
|{?H@ m6 W{tշo@{,FXC+~Cn6S9n0,p}`{oS&TCkPGVeٌQE5x@ڥ\$ D%s.y-ɂ*A}8'*8XD_-0wѰA1 `0t@p@=TiQTrHHl4oK+K/_6D
#oy?\Vyvy rR>'<gmSTdw|wuw]sNi N 